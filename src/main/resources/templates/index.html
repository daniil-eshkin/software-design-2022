<html xmlns:th="http://www.thymeleaf.org" lang="en">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<head>
    <link rel="stylesheet" type="text/css" th:href="@{/css/style.css}"/>
    <title>Add question</title>
</head>
<body>

<table>
    <tr>
        <th>Name</th>
        <th>Summary</th>
        <th>Creation time</th>
        <th>Completion time</th>
    </tr>
    <th:block th:each="task : ${tasks}">
    <tr>
        <td th:text="${task.name}"/>
        <td th:text="${task.summary}"/>
        <td th:text="${task.creationTime}"/>
        <td>
            <div th:if="${task.completed}">Completed on <th:block th:text="${task.completionTime}"/></div>
            <form th:if="${!task.completed}" method="POST" action="/complete-task">
                <input type="hidden" th:name="id" th:value="${task.id}">
                <input type="submit" value="Complete">
            </form>
        </td>
    </tr>
    </th:block>
</table>

<form th:if="${!show_completed}" method="GET" action="/get-tasks">
    <input type="submit" value="Show completed">
</form>
<form th:if="${show_completed}" method="GET" action="/get-uncompleted-tasks">
    <input type="submit" value="Hide completed">
</form>

<h3>Add task</h3>
<form th:object="${new_task}" method="POST" action="/add-task">
    <table>
        <tr>
            <td><label>Name:</label></td>
            <td><label>
                <input type="text" th:field="*{name}"/>
            </label></td>
        </tr>
        <tr>
            <td><label>Summary:</label></td>
            <td><label>
                <textarea rows="10" cols="40" th:field="*{summary}"></textarea>
            </label></td>
        </tr>
    </table>

    <input type="submit" value="Add">
</form>

</body>
</html>
